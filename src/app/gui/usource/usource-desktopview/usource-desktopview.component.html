<header class="px-4">
    <div class="row align-items-end mb-3" appKeyListener [enterKeyFunction]="searchWithFilter.bind(this)">
      <div class="col-auto">
        <label class="label-sm" for="search-engine">Search by name, account, job position, title or phone number</label>
        <div class="input-group">
          <div class="input-group-prepend">
            <div class="input-group-text"><i class="fas fa-search"></i></div>
          </div>
          <input type="text" class="form-control input-lg"
                 id="search-engine" maxlength="150"
                 [maxLength]="150" [(ngModel)]="resourceFilter.fullSearch">
        </div>
      </div>
      <div class="col-auto">
        <label class="label-sm">Filter by companies:</label>
        <app-multi-select (changeEventEmitter)="changeEntity($event)"
                          [filter]="resourceFilter.companies"
                          [items]="resourceCompanyList"
                          [placeholder]="'Select company to filter'"
                          idValue="company"
                          label="company">
        </app-multi-select>
      </div>
      <div class="col col-auto">
        <button (click)="searchWithFilter()" class="btn btn-primary text-nowrap">
          <i class="fa fa-search"></i>
          Search
        </button>
      </div>
    </div>

</header>
<div class="table-responsive">
  <table class="table table-full">
    <thead>
    <tr>
      <th style="background-color: #ffffff"><span (click)="changeSort('firstName')" class="sort-column"> Full name <i
        class="fas {{ resourceFilter.sortingRow==='firstName'?!resourceFilter.ascending?'fa-sort-up':'fa-sort-down':'fa-sort'}}"
      ></i></span></th>
      <th style="background-color: #ffffff"><span (click)="changeSort('company')" class="sort-column"> Company <i
        class="fas {{ resourceFilter.sortingRow==='company'?!resourceFilter.ascending?'fa-sort-up':'fa-sort-down':'fa-sort'}}"
      ></i></span></th>
      <th style="background-color: #ffffff"><span (click)="changeSort('jobPosition')" class="sort-column"> Position / Title <i
        class="fas {{ resourceFilter.sortingRow==='jobPosition'?!resourceFilter.ascending?'fa-sort-up':'fa-sort-down':'fa-sort'}}"
      ></i></span></th>
      <th style="background-color: #ffffff"> Contact</th>
      <th style="background-color: #ffffff"> Languages</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let resource of resources.content">
      <td>
        <ul class="actions-list">
          <li class="actions-list-item">
            <div style="position: relative">
              <div class="{{resource.inHoliday ? 'badge-danger' : 'badge-success'}} availability-pill"></div>
              <img class="user-avatar rounded-circle" [src]="'/api/resources/pictures/cropped/' + resource.resourceUuid">
            </div>
          </li>

          <li class="actions-list-item">
            <b>{{resource.firstName}} {{resource.lastName}}</b> ({{resource.account}})
          </li>
        </ul>
      </td>
      <td>
        <span class="badge-pill">
          <div [ngStyle]="{'background-color': resource.color}" class="pill"></div>
          {{resource.company}}
        </span>
      </td>
      <td>
        {{resource.jobPosition}}
        <br/>
        {{resource.jobTitle}}
      </td>
      <td>
        <ul  style="list-style: none; padding-inline-start: unset; margin-bottom: 0 !important;">
          <li *ngIf="resource.email"><i class="fas fa-envelope mr-2"></i><a href="mailto:{{resource.email}}">{{resource.email}}</a></li>
          <li *ngIf="resource.mobilePhone"><i class="fas fa-mobile-alt mr-2"></i><a href="tel:{{resource.mobilePhone}}" style="margin-left: 5px">{{resource.mobilePhone}}</a></li>
          <li *ngIf="resource.landLinePhone"><i class="fas fa-phone mr-2"></i><a href="tel:{{resource.landLinePhone}}">{{resource.landLinePhone}}</a></li>
          <li *ngIf="resource.instantMessagingAddress"><i class="fa-solid fa-bolt mr-2"></i><span style="margin-left: 5px;">{{resource.instantMessagingAddress}}</span></li>
        </ul>
      </td>
      <td [innerHTML]="resource.languages">
      </td>
    </tr>
    </tbody>
  </table>
</div>
<div *ngIf="resources.content.length>0" class="d-flex justify-content-end">

  <nav aria-label="Page navigation">
    <ul *ngIf="resources.first&&!resources.last" class="pagination">
      <li class="page-item">
            <button aria-label="Previous" class="page-link">
              <span aria-hidden="true">&laquo;</span>
            </button>
          </li>
          <li class="page-item active">
            <button class="page-link">{{resources.number + 1}}<span class="sr-only">(current)</span></button>
          </li>
          <li *ngIf="resources.totalPages>=resources.number+2" class="page-item">
            <button (click)="changePage(resources.number +1)" class="page-link">{{resources.number+2}}</button>
          </li>
          <li *ngIf="resources.totalPages>=resources.number+3" class="page-item">
            <button (click)="changePage(resources.number+2)" class="page-link">{{resources.number+3}}</button>
          </li>
          <li class="page-item">
            <button (click)="changePage(resources.number+1)" aria-label="Next" class="page-link">
              <span aria-hidden="true">&raquo;</span>
            </button>
          </li>
        </ul>
        <ul *ngIf="resources.first&&resources.last" class="pagination">
          <li class="page-item">
            <button aria-label="Previous" class="page-link">
              <span aria-hidden="true">&laquo;</span>
            </button>
          </li>
          <li class="page-item active">
            <button class="page-link">{{resources.number + 1}}<span class="sr-only">(current)</span></button>
          </li>
          <li class="page-item">
            <button aria-label="Next" class="page-link">
              <span aria-hidden="true">&raquo;</span>
            </button>
          </li>
        </ul>
        <ul *ngIf="!resources.first&&!resources.last" class="pagination">
          <li class="page-item">
            <button (click)="changePage(resources.number-1)" aria-label="Previous" class="page-link">
              <span aria-hidden="true">&laquo;</span>
            </button>
          </li>
          <li class="page-item ">
            <button (click)="changePage(resources.number-1)"
                    class="page-link">{{resources.number}}</button>
          </li>
          <li class="page-item active">
            <button class="page-link">{{resources.number+1}}<span class="sr-only">(current)</span></button>
          </li>
          <li class="page-item">
            <button (click)="changePage(resources.number+1)"
                    class="page-link">{{resources.number+2}}</button>
          </li>
          <li class="page-item">
            <button (click)="changePage(resources.number+1)" aria-label="Next" class="page-link">
              <span aria-hidden="true">&raquo;</span>
            </button>
          </li>
        </ul>
        <ul *ngIf="!resources.first&&resources.last" class="pagination">
          <li class="page-item">
            <button (click)="changePage(resources.number-1>0?resources.number-1:0)"
                    aria-label="Previous"
                    class="page-link">
              <span aria-hidden="true">&laquo;</span>
            </button>
          </li>
          <li *ngIf="resources.number-1>0">
            <button (click)="changePage(resources.number-2)"
              class="page-link">{{resources.number-1}}</button>
          </li>
          <li *ngIf="resources.number>0">
            <button (click)="changePage(resources.number-1)" class="page-link">{{resources.number}}</button>
          </li>
          <li class="page-item active">
            <button class="page-link ">{{resources.number+1}}<span class="sr-only">(current)</span></button>
          </li>
          <li class="page-item">
            <button aria-label="Next" class="page-link">
              <span aria-hidden="true">&raquo;</span>
            </button>
          </li>
        </ul>
      </nav>
</div>
